(this.webpackJsonpanime_roulette=this.webpackJsonpanime_roulette||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(10),a=n(8),c=n(12),o=n(4),i=n(1),s=n(2),u=n.n(s),l=n(18),d=n.n(l),h=n(19),j=n.n(h);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function O(e,t){var n=e.title,r=e.titleId,a=f(e,["title","titleId"]);return s.createElement("svg",b({width:"33.711567mm",height:"63.855679mm",viewBox:"0 0 33.711567 63.855679",id:"arrow-down",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("g",{transform:"translate(-81.966599,-23.855913)"},s.createElement("path",{style:{fillOpacity:1,stroke:"#262628",strokeWidth:2.11666656,strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},d:"m 91.911077,24.38508 h 13.021863 c 0.57584,0 1.03943,0.463588 1.03943,1.039435 v 45.361473 c 0,0 9.57933,-0.15582 9.1666,0.245732 L 98.756091,86.970855 82.034384,71.039826 c -0.416923,-0.397208 8.837259,-0.253842 8.837259,-0.253842 V 25.424515 c 0,-0.575847 0.463588,-1.039435 1.039434,-1.039435 z"})))}var m=s.forwardRef(O);n.p;function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function w(e,t){var n=e.title,r=e.titleId,a=p(e,["title","titleId"]);return s.createElement("svg",g({width:"5.8586311mm",height:"7.3587241mm",viewBox:"0 0 5.8586311 7.3587241",id:"svg8",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,s.createElement("g",{id:"layer1",transform:"translate(4.4979166,7.3180807)"},s.createElement("ellipse",{style:{fillOpacity:1,stroke:"none",strokeWidth:2.37620234,strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},id:"path4538",cx:-1.5213542,cy:-5.4400115,rx:1.9135045,ry:1.8780692}),s.createElement("path",{style:{fillOpacity:1,stroke:"none",strokeWidth:3.08441067,strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},d:"m 1.3607146,-1.1050964 c 0,1.14160408 -1.31149927,1.14574009 -2.9293156,1.14574009 -1.6178163,0 -2.9293156,-0.02775953 -2.9293156,-1.16936359 -1e-7,-1.1416042 1.3114992,-2.7285156 2.9293156,-2.7285156 1.61781639,0 2.9293157,1.6105349 2.9293156,2.7521391 z",id:"path4538-3"})))}var v=s.forwardRef(w),x=(n.p,n.p+"static/media/google_logo.4d15f668.png"),y=n(48),S=n(13),N=(n(46),n(42),n(24)),k=n(14),P=(n(44),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))});S.a.initializeApp({apiKey:"AIzaSyCKEr3NLxFL9SXJuONJONhQAZct6Yqt2AY",authDomain:"anime-roulette.firebaseapp.com",projectId:"anime-roulette",storageBucket:"anime-roulette.appspot.com",messagingSenderId:"5143254771",appId:"1:5143254771:web:bc9f978bb85bff4cdb8986"});var I=S.a.auth(),D=S.a.firestore(),E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(e){var t=e.slice();return t.reverse(),t}function M(e,t,n){return t[e%t.length+2*(n.length%t.length<2&&e>=t.length)]}var W=function(e,t){return Object(o.a)(Object(o.a)({},e),{},{translate:e.translate,drawLine:function(t,n,r,a){e.beginPath(),e.moveTo(t,n),e.lineTo(r,a),e.stroke()},drawArc:function(t,n,r,a,c){e.beginPath(),e.arc(t,n,r,a,c),e.stroke()},drawPieSlice:function(t,n,r,a,c,o){e.fillStyle=o,e.beginPath(),e.moveTo(t,n),e.arc(t,n,r,a,c),e.closePath(),e.fill()},drawPieSliceImage:function(t,n,r,a,c,o){e.save(),e.beginPath(),e.moveTo(t,n),e.arc(t,n,r,a,c),e.closePath(),e.clip(),e.translate(t,n),e.rotate((a+c)/2),e.drawImage(o,0,-o.height/2),e.restore()},drawTextRotated:function(t,n,r,a,c){e.save(),e.fillStyle="#fff",e.font="1.6rem -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif",e.translate(t,n),e.rotate(a);var o=e.measureText(r).width;e.fillText(r,-o/2,4),e.restore()},drawWheel:function(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.clearRect(0,0,t,t);for(var c=t/2,o=0;o<n.length;o++){var i=function(e){return e/n.length*2*Math.PI};this.drawPieSlice(c,c,c,i(o)-.013+a,i(o+1)+a,M(o,r,n));var s=i(o+.5)+a;this.drawTextRotated(c+Math.cos(s)*c/1.9,c+Math.sin(s)*c/1.9,n[o].name,s)}}})};function A(e){var t=e.shows,n=e.removeShow,u=e.wheelName,l=(e.users,e.updateShowProp),d=e.colors,h=e.addHistory,j=Object(c.a)(e,["shows","removeShow","wheelName","users","updateShowProp","colors","addHistory"]),b=Object(s.useRef)(null),f=Object(s.useState)(960),O=Object(a.a)(f,2),g=O[0],p=O[1],w=Object(s.useState)("#262628"),v=Object(a.a)(w,2),x=v[0],y=v[1],S=Object(s.useState)(!1),N=Object(a.a)(S,2),P=N[0],I=N[1],E=Object(s.useState)(null),C=Object(a.a)(E,2),A=C[0],R=C[1],T=Object(s.useState)(null),H=Object(a.a)(T,2),U=H[0],L=H[1],F=Object(k.b)(D.doc("wheels/".concat(u))),J=Object(a.a)(F,1)[0],z=J?J.rotate||null:U;Object(s.useEffect)((function(){if(!((e=z)===(t=U)||e&&t&&e.endDate===t.endDate&&e.offset===t.offset&&e.rng===t.rng)&&z){var e,t,n=Object(o.a)(Object(o.a)({},z),{},{date:z.date.toDate()});L((function(){return n}))}}),[U,z,null===z||void 0===z?void 0:z.rng,null===z||void 0===z?void 0:z.endDate,null===z||void 0===z?void 0:z.offset]);var q=Object(s.useCallback)((function(e){D.doc("wheels/".concat(u)).update({rotate:"function"===typeof e?e(U):e}),L(e)}),[U,u]);Object(s.useEffect)((function(){if(b&&b.current&&(!U||!U.spinning)&&t)if(W(b.current.getContext("2d"),g).drawWheel(t,d,U?U.offset+U.rng*Math.PI*2:0),U){var e=U.offset/(2*Math.PI)+U.rng+.25,n=Math.floor((1-e%1)*t.length);y((function(){return M(n,d,t)}))}else{var r=Math.floor(.75*t.length);y((function(){return M(r,d,t)}))}}),[b,g,U,null===U||void 0===U?void 0:U.spinning,t,d]),Object(s.useEffect)((function(){if(b){var e=function(e){if(b&&b.current){var t=document.getElementById("wheel-width").getBoundingClientRect().width;g!==t&&p((function(){return t}))}};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[b,g]),Object(s.useEffect)((function(){if(b&&U&&t){if(null===U||void 0===U?void 0:U.spinning){var e=setInterval((function(){var e=new Date;if(e>U.endDate){var n=Math.floor((1-(U.offset/(2*Math.PI)+U.rng+.25)%1)*t.length),r=M(n,d,t);return R((function(){return Object(o.a)(Object(o.a)({},t[n]),{},{date:new Date,color:r})})),q((function(){return Object(o.a)(Object(o.a)({},U),{},{spinning:!1})})),I((function(){return!0})),void y((function(){return r}))}var a,c=(a=(e-U.date)/(U.endDate-U.date))<.5?16*a*a*a*a*a:1-Math.pow(-2*a+2,5)/2,i=Math.floor((1-((U.offset+c*(2*Math.PI*13+U.rng*Math.PI*2))/(2*Math.PI)+.25)%1)*t.length);y((function(){return M(i,d,t)})),W(b.current.getContext("2d"),g).drawWheel(t,d,U.offset+c*(2*Math.PI*13+U.rng*Math.PI*2))}),10);return function(){return clearInterval(e)}}}}),[U,null===U||void 0===U?void 0:U.spinning,q,b,t,d,g]);return Object(i.jsxs)("div",Object(o.a)(Object(o.a)({},j),{},{id:"wheel-width",children:[Object(i.jsxs)("div",{className:"wheel-box",children:[Object(i.jsx)("div",{className:"arrow",children:Object(i.jsx)(m,{style:{fill:x}})}),Object(i.jsx)("canvas",{id:"wheel",className:t&&0!==t.length?"populated":"empty",onClick:function(){return q((function(e){if(e&&U.spinning)return e;var t=new Date,n=Math.random();return{date:t,offset:e?e.offset+e.rng*Math.PI*2:0,rng:n,endDate:+t+8e3+1e3*n,spinning:!0}}))},ref:b,width:g,height:g})]}),Object(i.jsx)(B,{isOpen:P,onRequestClose:function(){I((function(){return!1}))},updateShowProp:function(e,t,n){e[t]!==n&&(l(e.uuid,t,n),R((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(r.a)({},t,n))})))},show:U&&A,beginWatching:U?function(){h(A),n(A.uuid),I((function(){return!1})),R((function(){return null}))}:null})]}))}function R(e){var t=e.user,n=e.addShow,r=Object(s.useState)(""),c=Object(a.a)(r,2),o=c[0],u=c[1],l=function(){n({name:o,uuid:Object(y.a)(),owner:t}),u((function(){return""}))};return Object(i.jsx)("input",{type:"text",className:"show add-new",placeholder:"Add Show +",value:o,onChange:function(e){return u((function(){return e.target.value}))},onKeyDown:function(e){return"Enter"===e.key&&o&&l()},onBlur:function(e){return o&&l()}})}function T(e){var t=e.users,n=e.shows,r=e.renderShows,a=e.addShow;return t.map((function(e,t){return Object(i.jsxs)("div",{className:"user-shows",children:[Object(i.jsx)("h3",{className:0===t?"first-h3":"",children:e.name},"h3 "+e.name),n&&n.filter((function(t){return t.owner.name===e.name})).map(r),Object(i.jsx)(R,{user:e,addShow:a},"add new button "+e.name)]},e.name)}))}function H(e){var t=e.users,n=e.setUsers,u=e.shows,l=e.removeShow,d=e.addHistory,h=e.updateShowProp,b=e.addShow,f=e.colors,O=Object(c.a)(e,["users","setUsers","shows","removeShow","addHistory","updateShowProp","addShow","colors"]),m=Object(s.useState)(!1),g=Object(a.a)(m,2),p=g[0],w=g[1],x=Object(s.useState)(null),y=Object(a.a)(x,2),S=y[0],N=y[1],k=Object(s.useState)(!1),P=Object(a.a)(k,2),I=P[0],D=P[1],E=function(e,t,n){e[t]!==n&&(h(e.uuid,t,n),N((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(r.a)({},t,n))})))},C=function(e){var t=u.findIndex((function(t){return t===e}));return Object(i.jsxs)("div",{className:"show",children:[Object(i.jsx)("input",{type:"text",value:e.name,onChange:function(t){return h(e.uuid,"name",t.target.value)},style:{borderLeftColor:M(t,f,u)}}),Object(i.jsx)("button",{className:"delete",onClick:function(t){return l(e.uuid)},children:"\xd7"}),Object(i.jsx)("button",{className:"clickable-faded edit",onClick:function(){return N((function(){return e}))},children:"edit"}),Object(i.jsx)(B,{isOpen:!!S&&S.uuid===e.uuid,onRequestClose:function(){return N(null)},show:S,updateShowProp:E,beginWatching:S?function(){d(Object(o.a)(Object(o.a)({},S),{},{date:new Date})),l(S.uuid),N(null)}:null})]},e.uuid)};return Object(i.jsxs)("div",Object(o.a)(Object(o.a)({},O),{},{children:[Object(i.jsxs)("div",{className:"shows-list",children:[Object(i.jsxs)("div",{className:"top-bar",children:[Object(i.jsx)("h2",{children:"Shows"}),Object(i.jsx)("button",{className:"show-users-button",onClick:function(){return w((function(e){return!e}))},children:Object(i.jsx)(v,{})}),Object(i.jsx)("button",{className:"clickable-faded edit",onClick:function(){return D((function(){return!0}))},children:"edit users"})]}),p?Object(i.jsx)(T,{shows:u,users:t,renderShows:C,addShow:b}):[u&&u.map(C),Object(i.jsx)(R,{user:t[0],addShow:b},"global add new button")]]}),Object(i.jsxs)(j.a,{className:"edit-users-modal modal-screen",ariaHideApp:!1,isOpen:I,onRequestClose:function(){return D((function(){return!1}))},children:[Object(i.jsx)("h2",{children:"Manage Users"}),Object(i.jsx)("div",{className:"users-list",children:t.map((function(e){return Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"text",defaultValue:e.name,onChange:function(t){return n((function(n){return n.map((function(n){return n.uuid===e.uuid?Object(o.a)(Object(o.a)({},e),{},{name:t.target.value}):Object(o.a)({},n)}))}))}})},e.uuid)}))})]})]}))}function U(e){e.users,e.shows;var t=e.history,n=e.updateHistoryProp,u=Object(c.a)(e,["users","shows","history","updateHistoryProp"]),l=Object(s.useState)(null),d=Object(a.a)(l,2),h=d[0],j=d[1];return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",Object(o.a)(Object(o.a)({},u),{},{children:[Object(i.jsx)("h2",{children:"History"}),Object(i.jsx)("div",{className:"list",children:C(t).map((function(e){return Object(i.jsxs)("div",{className:"show",onClick:function(){return j(e)},children:[Object(i.jsx)("span",{className:"title",children:e.name}),Object(i.jsxs)("span",{className:"date",children:[" - ",e.date.getDate()," ",E[e.date.getMonth()],"."]})]},e.uuid)}))})]})),Object(i.jsx)(B,{isOpen:!!h,onRequestClose:function(){return j(null)},show:h,updateShowProp:function(e,t,a){e[t]!==a&&(n(e.uuid,t,a),j((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(r.a)({},t,a))})))}})]})}function B(e){var t=e.show,n=e.updateShowProp,r=e.beginWatching,a=void 0===r?null:r,s=Object(c.a)(e,["show","updateShowProp","beginWatching"]);return Object(i.jsx)(j.a,Object(o.a)(Object(o.a)({className:"show-inspector modal-screen",ariaHideApp:!1},s),{},{children:t&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("h2",{className:"title",children:[t.name,a?Object(i.jsx)("button",{className:"begin-wating",onClick:a,children:"Start watching"}):Object(i.jsxs)("select",{className:"state",defaultValue:t.state,onChange:function(e){return n(t,"state",e.target.value)},children:[Object(i.jsx)("option",{children:"Watching"}),Object(i.jsx)("option",{children:"Completed"}),Object(i.jsx)("option",{children:"Dropped"})]})]}),Object(i.jsxs)("div",{className:"middle",style:{backgroundColor:t.color},children:[t.banner&&Object(i.jsx)("img",{className:"banner",alt:"banner",src:t.banner}),Object(i.jsx)("input",{className:"banner-url hover-input "+(t.banner?"":"visible"),type:"text",placeholder:"Insert banner url...",onKeyDown:function(e){return"Enter"===e.key&&e.target.value&&n(t,"banner",e.target.value)},onBlur:function(e){return e.target.value&&n(t,"banner",e.target.value)}})]}),"Watching"===t.state&&Object(i.jsxs)("div",{className:"links",children:[t.watchingUrl&&Object(i.jsxs)("span",{children:["Watching at ",Object(i.jsx)("a",{href:t.watchingUrl,rel:"noreferrer",target:"_blank",children:(t.watchingUrl.match(/\w+(\.\w+)+/)||[])[0]})]}),Object(i.jsx)("input",{className:"watching-url hover-input "+(t.watchingUrl?"":"visible"),type:"text",placeholder:"".concat(t.watchingUrl?"Replace":"Insert"," watching url..."),onKeyDown:function(e){return"Enter"===e.key&&e.target.value&&n(t,"watchingUrl",e.target.value)},onBlur:function(e){return e.target.value&&n(t,"watchingUrl",e.target.value)}})]}),Object(i.jsxs)("div",{className:"bottom",children:[Object(i.jsxs)("div",{className:"owner-field",children:["Suggested by ",Object(i.jsx)("span",{className:"user",children:t.owner.name})]}),t.date&&Object(i.jsxs)("div",{className:"date",children:[!a&&"Started watching at","\xa0",Object(i.jsxs)("span",{className:"date-string",children:[Object(i.jsx)("input",{type:"date",defaultValue:t.date.toLocaleDateString("en-CA"),onChange:function(e){return n(t,"date",new Date(e.target.value))}}),t.date.getDate(),"\xa0",E[t.date.getMonth()],".\xa0",t.date.getFullYear()]}),"."]})]})]})}))}function L(e){var t=e.wheelName,n=(e.setWheelName,e.showsQuery),c=e.historyQuery,u=Object(s.useState)((function(){return[{name:"Tony",uuid:Object(y.a)()},{name:"Espen",uuid:Object(y.a)()},{name:"J\xf8rgen",uuid:Object(y.a)()},{name:"Sigurd",uuid:Object(y.a)()}]})),l=Object(a.a)(u,2),d=l[0],h=l[1],j=Object(k.a)(n),b=Object(a.a)(j,1)[0],f=(Object(k.a)(c)[0]||[]).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{date:e.date.toDate?e.date.toDate():new Date(e.date)})}));Object(s.useEffect)((function(){}),[t]);var O=["#caa05a","#ae6a47","#8b4049","#543344","#515262","#63787d","#8ea091","#8B9863"],m=function(e){return D.collection("shows-".concat(t)).doc(e).delete().then((function(){return console.log("Document successfully deleted!")})).catch((function(e){return console.error("Error removing document: ",e)}))},g=function(e,n,a){return D.collection("shows-".concat(t)).doc(e).update(Object(r.a)({},n,a)).then((function(){return console.log("Document successfully updated!")})).catch((function(e){return console.error("Error updating document: ",e)}))},p=function(e){return D.collection("history-".concat(t)).doc(e.uuid).set(e).then((function(){return console.log("Document successfully added!")})).catch((function(e){return console.error("Error adding document: ",e)}))};return Object(i.jsxs)("main",{id:"home",role:"main",children:[Object(i.jsx)(H,{className:"left   shows",users:d,shows:b,addHistory:p,colors:O,removeShow:m,updateShowProp:g,addShow:function(e){return D.collection("shows-".concat(t)).doc(e.uuid).set(e).then((function(){return console.log("Document successfully added!")})).catch((function(e){return console.error("Error adding document: ",e)}))},setUsers:h}),Object(i.jsx)(A,{className:"center wheel",users:d,shows:b,addHistory:p,colors:O,removeShow:m,updateShowProp:g,wheelName:t}),Object(i.jsx)(U,{className:"right  history",users:d,shows:b,history:f,updateHistoryProp:function(e,n,a){return D.collection("history-".concat(t)).doc(e).update(Object(r.a)({},n,a)).then((function(){return console.log("Document successfully updated!")})).catch((function(e){return console.error("Error updating document: ",e)}))}})]})}function F(){return Object(i.jsx)("div",{className:"sign-in-panel",children:Object(i.jsxs)("button",{className:"sign-in",onClick:function(){var e=new S.a.auth.GoogleAuthProvider;I.signInWithRedirect(e)},children:[Object(i.jsx)("img",{alt:"Google Logo",className:"google-logo",src:x,width:50,height:50}),"Sign in with Google"]})})}function J(e){var t=e.className,n=void 0===t?"":t,r=Object(c.a)(e,["className"]);return I.currentUser&&Object(i.jsx)("button",Object(o.a)(Object(o.a)({},r),{},{className:"clickable-faded "+n,onClick:function(){return I.signOut()},children:"Sign out"}))}function z(){var e=Object(s.useState)((function(){return localStorage.getItem("wheel-name")||"Test Wheel"})),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(N.a)(I),o=Object(a.a)(c,1)[0],u=D.collection("shows-".concat(n)),l=D.collection("history-".concat(n)).orderBy("date");return Object(s.useEffect)((function(){localStorage.setItem("wheel-name",n)}),[n]),Object(i.jsxs)("div",{children:[Object(i.jsxs)("header",{children:[Object(i.jsx)("div",{children:o&&Object(i.jsxs)("div",{className:"wheel-name clickable-faded",children:[n,Object(i.jsxs)("select",{defaultValue:n,onChange:function(e){return r((function(){return e.target.value}))},children:[Object(i.jsx)("option",{children:"Anime Abuse"}),Object(i.jsx)("option",{children:"Testing Wheel"}),Object(i.jsx)("option",{children:"Animal Abuse"}),Object(i.jsx)("option",{children:"Third one for show"}),Object(i.jsx)("option",{children:"WHEEL OF IMPORT"}),Object(i.jsx)("option",{children:"Test Wheel"})]})]})}),Object(i.jsx)("h1",{children:"Anime Roulette"}),Object(i.jsx)("div",{className:"export-import",children:Object(i.jsx)(J,{})})]}),o?Object(i.jsx)(L,{wheelName:n,showsQuery:u,historyQuery:l}):Object(i.jsx)(F,{})]})}d.a.render(Object(i.jsx)(u.a.StrictMode,{children:Object(i.jsx)(z,{})}),document.getElementById("root")),P()}},[[45,1,2]]]);
//# sourceMappingURL=main.2e7837a3.chunk.js.map